webpackJsonp([77],{JmqX:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback"},[a("el-dialog",{staticStyle:{"min-width":"1000px"},attrs:{title:e.titleText,visible:e.isDialogNotice,center:"",fullscreen:"",showClose:!1},on:{"update:visible":function(t){e.isDialogNotice=t}}},[a("el-form",{ref:"ruleForm",staticClass:"small-space",attrs:{"label-position":"left",model:e.ruleForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"公告标题："}},[a("span",[e._v(e._s(e.ruleForm.Title))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"公告类型："}},[a("span",{domProps:{innerHTML:e._s(e.noticeTypeFilter(e.ruleForm.NoticeTypeCode))}})])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"重要级别："}},[a("span",[e._v(e._s(e._f("levelFilter")(e.ruleForm.Level)))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"生效日期："}},[a("span",[e._v(e._s(e._f("replaceTime")(e.ruleForm.Start)))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"失效日期："}},[a("span",[e._v(e._s(e._f("replaceTime")(e.ruleForm.Finish)))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公告内容："}},[a("span",{domProps:{innerHTML:e._s(e.ruleForm.Content)}})])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"发布备注："}},[a("span",[e._v(e._s(e.ruleForm.Remarks))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{"padding-right":"20px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"公开反馈："}},[e.openFeed.length?a("div",{staticClass:"openFeedback"},[a("ul",{staticClass:"items"},e._l(e.openFeed,function(t){return a("li",{key:t.Id,staticClass:"item"},[a("span",{staticClass:"name",domProps:{innerHTML:e._s(t.CreatorName+" 回复@"+t.TargetName)}}),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(e._f("replaceTime")(t.CreateTime)))]),e._v(" "),a("div",{staticClass:"content"},[e._v(e._s(t.Content))]),e._v(" "),e.isReply===t.Code?a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入回复内容"},model:{value:e.replyText,callback:function(t){e.replyText=t},expression:"replyText"}}):e._e(),e._v(" "),e.isReply===t.Code?a("el-checkbox",{model:{value:e.isPublish,callback:function(t){e.isPublish=t},expression:"isPublish"}},[e._v("所有人可见")]):e._e(),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.hideFeedback(t)}}},[e._v("隐藏")]),e._v(" "),a("el-button",{attrs:{type:"primary"},domProps:{innerHTML:e._s(e.isReply===t.Code?"收起":"回复")},on:{click:function(a){return e.reply(t.Code)}}}),e._v(" "),e.isReply===t.Code?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.sendReply(t)}}},[e._v("发送")]):e._e()],1),e._v(" "),e._l(t.Children,function(s){return t.Children.length?a("div",{staticClass:"children"},[a("span",{staticClass:"name",domProps:{innerHTML:e._s(s.CreatorName+" 回复@"+s.TargetName)}}),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(e._f("replaceTime")(s.CreateTime)))]),e._v(" "),a("div",{staticClass:"content"},[e._v(e._s(s.Content))]),e._v(" "),e.isReply===s.Code?a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入回复内容"},model:{value:e.replyText,callback:function(t){e.replyText=t},expression:"replyText"}}):e._e(),e._v(" "),e.isReply===s.Code?a("el-checkbox",{model:{value:e.isPublish,callback:function(t){e.isPublish=t},expression:"isPublish"}},[e._v("所有人可见")]):e._e(),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelReply(s)}}},[e._v("撤销回复")])],1)],1):e._e()})],2)}),0)]):e._e()])],1),e._v(" "),a("el-col",{staticStyle:{"padding-right":"20px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"私密反馈："}},[e.privateFeed.length?a("div",{staticClass:"openFeedback"},[a("ul",{staticClass:"items"},e._l(e.privateFeed,function(t){return a("li",{key:t.Id,staticClass:"item"},[a("span",{staticClass:"name",domProps:{innerHTML:e._s(t.CreatorName+" 回复@"+t.TargetName)}}),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(e._f("replaceTime")(t.CreateTime)))]),e._v(" "),a("div",{staticClass:"content "},[e._v(e._s(t.Content))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isReply===t.Code,expression:"isReply === item.Code"}],attrs:{type:"textarea",autosize:"",placeholder:"请输入回复内容"},model:{value:e.replyText,callback:function(t){e.replyText=t},expression:"replyText"}}),e._v(" "),e.isReply===t.Code?a("el-checkbox",{model:{value:e.isPublish,callback:function(t){e.isPublish=t},expression:"isPublish"}},[e._v("所有人可见")]):e._e(),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary"},domProps:{innerHTML:e._s(e.isReply===t.Code?"收起":"回复")},on:{click:function(a){return e.reply(t.Code)}}}),e._v(" "),e.isReply===t.Code?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.sendReply(t)}}},[e._v("发送")]):e._e()],1),e._v(" "),e._l(t.Children,function(s){return t.Children.length?a("div",{staticClass:"children"},[a("span",{staticClass:"name",domProps:{innerHTML:e._s(s.CreatorName+" 回复@"+s.TargetName)}}),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(e._f("replaceTime")(s.CreateTime)))]),e._v(" "),a("div",[e._v(e._s(s.Content))]),e._v(" "),e.isReply===s.Code?a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入回复内容"},model:{value:e.replyText,callback:function(t){e.replyText=t},expression:"replyText"}}):e._e(),e._v(" "),e.isReply===s.Code?a("el-checkbox",{model:{value:e.isPublish,callback:function(t){e.isPublish=t},expression:"isPublish"}},[e._v("所有人可见")]):e._e(),e._v(" "),a("div",{staticClass:"btn-item"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelReply(s)}}},[e._v("撤销回复")])],1)],1):e._e()})],2)}),0)]):e._e()])],1)],1)],1)],1)],1)},i=[],r={render:s,staticRenderFns:i};t.a=r},Ups3:function(e,t,a){var s=a("tBj0");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("2252a2bd",s,!0,{})},"Y1/g":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),i=function(e){return e&&e.__esModule?e:{default:e}}(s),r=a("auNG"),n=a("T452"),l=a("zL8q"),o=a("NYxO");t.default={props:{},data:function(){return{typeNameList:[],titleText:"反馈处理",isDialogNotice:!0,ruleForm:{},privateFeed:[],openFeed:[],replyText:"",isReply:"",isPublish:!1,defaultCode:"00000000-0000-0000-0000-000000000000"}},computed:(0,i.default)({},(0,o.mapGetters)(["userCode","companyCode","name","userType","loading"])),created:function(){this._getNoticeType()},methods:{_getNoticeType:function(){var e=this;this.$store.dispatch("setLoadingState",!0),(0,r.getNoticeType)().then(function(t){t.data.State===n.REQ_OK?(e.typeNameList=t.data.Data,e.getFeedback()):(e.$store.dispatch("setLoadingState",!1),l.Message.error("公告反馈加载失败，请重试！"))}).catch(function(){e.$store.dispatch("setLoadingState",!1),l.Message.error("公告反馈加载失败，请重试！")})},getFeedback:function(){var e=this;(0,r.getNoticeDetail)(this.$route.query.code).then(function(t){t.data.State===n.REQ_OK?(e.ruleForm=t.data.Data,t.data.Data.Feedback?e.getFinalFeed(t.data.Data.Feedback):(e.privateFeed=[],e.openFeed=[])):l.Message.error("公告反馈加载失败，请重试！")}).catch(function(){l.Message.error("公告反馈加载失败，请重试！")}),this.$store.dispatch("setLoadingState",!1)},hideFeedback:function(e){var t=this;(0,r.hideFeedback)(e.Code).then(function(e){e.data.State===n.REQ_OK?(l.Message.success("隐藏反馈成功！"),t.getFeedback()):l.Message.error("隐藏反馈失败，请重试！")}).catch(function(){l.Message.error("隐藏反馈失败，请重试！")})},reply:function(e){this.isReply===e?this.isReply="":this.isReply=e},sendReply:function(e){var t=this;(0,r.feedback)(this.isCompanyAdmin(),e.NoticeCode,this.replyText,this.isPublish,e.Code).then(function(e){e.data.State===n.REQ_OK?(l.Message.success("反馈成功！"),t.replyText="",t.getFeedback()):l.Message.error("反馈失败，请重试！")}).catch(function(){l.Message.error("反馈失败，请重试！")})},cancelReply:function(e){var t=this;(0,r.cancelReply)(e.Code).then(function(e){e.data.State===n.REQ_OK?(l.Message.success("撤销回复成功！"),t.getFeedback()):l.Message.error("撤销回复失败，请重试！")}).catch(function(){l.Message.error("撤销回复失败，请重试！")})},noticeTypeFilter:function(e){var t="";if(e&&this.typeNameList)for(var a=0;a<this.typeNameList.length;a++)this.typeNameList[a].Code===e&&(t=this.typeNameList[a].TypeName);return t},getFinalFeed:function(e){this.privateFeed=e.filter(function(e){return!e.IsPublish}),this.openFeed=e.filter(function(e){return e.IsPublish})},isCompanyAdmin:function(){return this.userType===n.COMPANY_ADMIN}}}},"hhr/":function(e,t,a){"use strict";function s(e){a("Ups3")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Y1/g"),r=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);var l=a("JmqX"),o=a("VU/8"),c=s,p=o(r.a,l.a,!1,c,null,null);t.default=p.exports},tBj0:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".feedback .el-dialog__header{width:960px;margin:0 auto}.feedback .el-dialog__body{width:960px;margin:0 auto;-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.12),0 0 6px 0 rgba(0,0,0,.04);box-shadow:0 2px 4px 0 rgba(0,0,0,.12),0 0 6px 0 rgba(0,0,0,.04);margin-bottom:50px}.feedback .el-form-item__content{padding-right:20px}.feedback .el-form-item{margin-bottom:0!important}.feedback .btn-item{margin-top:10px}.feedback .btn-item button{padding:6px 10px;font-size:12px}.feedback .children{padding:10px;background:#f7f6f6;border-radius:5px;margin:5px 0}",""])}});