webpackJsonp([10],{"+xjT":function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),o=r(n),i=a("woOf"),s=r(i),l=a("Xxa5"),c=r(l),d=a("exGp"),u=r(d),h=a("T452"),p=a("LJtj"),f=a("zL8q");t.default={props:{TermList:{type:Array,default:[]},SchemeCode:{type:String,default:""}},data:function(){var e=this,t=function(t,a,r){return a?e.addObj.ProjectCode?void(0,p.checkUniqueTermName)(a,e.addObj.SchemeCode,e.addObj.Code).then(function(e){e.data.State===h.REQ_OK?e.data.Data?r():r(new Error("名称已存在！")):r(new Error("名称校验失败，请重试！"))}).catch(function(){r(new Error("请求超时，请重试！"))}):r(new Error("请先选择所属项目！")):r(new Error("名称不能为空！"))};return{title:"新增项目",projectList:[],addObj:{SchemeCode:"",Name:"",BeginDate:null,ProjectCode:"",ProjectName:"",AttributeCode:"",AttributeName:"",TaxType:"",TypeCode:"",TypeName:"",PayFrequencyCode:"",PayLogicCode:"",PayMethodCode:"",PayMethodName:"",Scale:2,RoundType:"",PayRuleId:"",EmpTypeRange:"",DefaultSettingContent:[{Id:1,DefaultValue:0,OrgRange:[],JobLevel:[],Note:""}],WithHoldingClause:{Absenteeism:0,Hire:0,LateCount:0,LateDuration:0,Leave:0},DefaultSettingStruct:[],Status:!0,Remark:""},ProjectCode:[],AttributeCode:[],TypeCode:[],PayFrequencyCode:[],PayLogicCode:[],PayMethodCode:[],JobLevel:[],DefaultSettingStruct:[],Scale:[{value:0,label:"整数"},{value:1,label:"1位小数"},{value:2,label:"2位小数"}],RoundType:[{value:1,label:"四舍五入"},{value:2,label:"向下取整"},{value:3,label:"向上取整"}],PayRuleId:[],EmpTypeRange:[],WithHoldingClause:"",hire:!1,lateCount:null,chooseVal:null,timesOrMin:[{value:1,label:"次"},{value:2,label:"分钟"}],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},isShowDefaultSet:!1,isPayRulePercent:!1,defaultSetUnit:"元/天",selectedRule:"",selectedUnit:"",tidVisible:!1,defaultOrgRang:{children:"children",label:"label"},defaultCheck:[],TidArrTree:[],rules:{Name:[{validator:t,trigger:"blur"}],BeginDate:[{type:"date",required:!0,message:"请选择生效日期",trigger:"change"}],ProjectCode:[{type:"string",required:!0,message:"请选择所属项目",trigger:"change"}],TypeCode:[{type:"string",required:!0,message:"请选择项目类型",trigger:"change"}],AttributeCode:[{type:"string",required:!0,message:"请选择项目属性",trigger:"change"}],Scale:[{type:"number",required:!0,message:"请选择格式规则",trigger:"change"}],RoundType:[{type:"number",required:!0,message:"请选择取值方式",trigger:"change"}],EmpTypeRange:[{type:"array",required:!0,message:"请选择员工类型",trigger:"change"}],PayLogicCode:[{type:"string",required:!0,message:"请选择计算逻辑",trigger:"change"}],PayFrequencyCode:[{type:"string",required:!0,message:"请选择发放频率",trigger:"change"}],PayRuleId:[{type:"string",required:!0,message:"请选择发放规则",trigger:"change"}]},dialogFormVisible:!1,searchText:"",isIncludeIncome:!1}},created:function(){},methods:{_getDic:function(){var e=this;return(0,u.default)(c.default.mark(function t(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._getTermProject();case 3:return t.next=5,e._getTermAttribute();case 5:return t.next=7,e._getTermType();case 7:return t.next=9,e._getPayFrequency();case 9:return t.next=11,e._getPayMethod();case 11:return t.next=13,e._getPayRule();case 13:return t.next=15,e._getPayLogic();case 15:return t.next=17,e._getEmpType();case 17:return t.next=19,e._getSchemeOrgList();case 19:return t.next=21,e._getJobLevel();case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.log(t.t0);case 26:case"end":return t.stop()}},t,e,[[0,23]])}))()},_getTermProject:function(){var e=this;return(0,p.getTermProject)().then(function(t){t.data.State===h.REQ_OK?(e.ProjectCode=t.data.Data,e.addObj.ProjectCode&&e.change(e.addObj.ProjectCode)):f.Message.error("项目列表加载失败，请刷新重试！")}).catch(function(){f.Message.error("项目列表加载失败，请刷新重试！")})},_getTermAttribute:function(){var e=this;return(0,p.getTermAttribute)().then(function(t){t.data.State===h.REQ_OK?e.AttributeCode=t.data.Data:f.Message.error("项目属性加载失败，请刷新重试！")}).catch(function(){f.Message.error("项目属性加载失败，请刷新重试！")})},_getTermType:function(){var e=this;return(0,p.getTermType)().then(function(t){t.data.State===h.REQ_OK?e.TypeCode=t.data.Data:f.Message.error("项目类型加载失败，请刷新重试！")}).catch(function(){f.Message.error("项目类型加载失败，请刷新重试！")})},_getPayFrequency:function(){var e=this;return(0,p.getPayFrequency)().then(function(t){t.data.State===h.REQ_OK?(e.PayFrequencyCode=t.data.Data,e.selectedUnit=e.PayFrequencyCode[0].OperateCode):f.Message.error("发放频率失败，请刷新重试！")}).catch(function(){f.Message.error("发放频率失败，请刷新重试！")})},_getPayMethod:function(){var e=this;return(0,p.getPayMethod)().then(function(t){t.data.State===h.REQ_OK?e.PayMethodCode=t.data.Data:f.Message.error("发放频率单位失败，请刷新重试！")}).catch(function(){f.Message.error("发放频率单位加载失败，请刷新重试！")})},_getPayRule:function(){var e=this;return(0,p.getPayRule)().then(function(t){t.data.State===h.REQ_OK?(e.PayRuleId=t.data.Data,e.selectedRule=e.PayRuleId[0].Name):f.Message.error("发放规则加载失败，请刷新重试！")}).catch(function(){f.Message.error("发放规则加载失败，请刷新重试！")})},_getPayLogic:function(){var e=this;return(0,p.getPayLogic)().then(function(t){t.data.State===h.REQ_OK?e.PayLogicCode=t.data.Data:f.Message.error("计算逻辑加载失败，请刷新重试！")}).catch(function(){f.Message.error("计算逻辑加载失败，请刷新重试！")})},_getEmpType:function(){var e=this;return(0,p.getEmpType)().then(function(t){t.data.State===h.REQ_OK?e.EmpTypeRange=t.data.Data:f.Message.error("员工类型加载失败，请刷新重试！")}).catch(function(){f.Message.error("员工类型加载失败，请刷新重试！")})},_getSchemeOrgList:function(){var e=this;(0,p.getSchemeOrgList)(this.$route.query.code).then(function(t){t.data.State===h.REQ_OK?e.TidArrTree=e.recursionFn(t.data.Data):f.Message.error("组织范围加载失败，请刷新重试！")}).catch(function(){f.Message.error("组织范围加载失败，请刷新重试！")})},_getRelStructList:function(){var e=this;(0,p.getRelStructList)(this.$route.query.code).then(function(t){t.data.State===h.REQ_OK?e.DefaultSettingStruct=t.data.Data:f.Message.error("项目构成列表获取失败，请刷新重试！")}).catch(function(){f.Message.error("项目构成列表获取失败，请刷新重试！")})},_getJobLevel:function(){var e=this;(0,p.getJobLevel)().then(function(t){t.data.State===h.REQ_OK?e.JobLevel=t.data.Data:f.Message.error("职等列表获取失败，请刷新重试！")}).catch(function(){f.Message.error("职等列表获取失败，请刷新重试！")})},handlePayRule:function(e){var t=this.PayRuleId.filter(function(t){return t.UniCode===e});-1!==t[0].Name.indexOf("百分比")?(0===this.DefaultSettingStruct.length&&this._getRelStructList(),this.isPayRulePercent=!0):this.isPayRulePercent=!1,console.log(t),this.selectedRule=t[0].Name,this.transformationUnit(this.selectedRule,this.selectedUnit)},handlePayFrequency:function(e){var t=this.PayFrequencyCode.filter(function(t){return t.UniCode===e});this.selectedUnit=t[0].OperateCode,this.transformationUnit(this.selectedRule,this.selectedUnit)},handlePayLogic:function(e){var t=this.PayLogicCode.filter(function(t){return t.UniCode===e});this.isShowDefaultSet=-1!==t[0].Name.indexOf("预设"),this.isShowDefaultSet&&0===this.JobLevel.length&&this._getJobLevel()},transformationUnit:function(e,t){"固定额"===e&&"Day"===t&&(this.defaultSetUnit="元/天"),"固定额"===e&&"Month"===t&&(this.defaultSetUnit="元/月"),"固定额"===e&&"Quarter"===t&&(this.defaultSetUnit="元/季度"),"固定额"===e&&"Year"===t&&(this.defaultSetUnit="元/年"),"百分比"===e&&"Day"===t&&(this.defaultSetUnit="%/天"),"百分比"===e&&"Month"===t&&(this.defaultSetUnit="%/月"),"百分比"===e&&"Quarter"===t&&(this.defaultSetUnit="%/季度"),"百分比"===e&&"Year"===t&&(this.defaultSetUnit="%/年")},searchChange:function(){var e=this;this.projectList=this.TermList.filter(function(t){return-1!==t.Name.indexOf(e.searchText)})},change:function(e){var t=this.ProjectCode.filter(function(t){return t.UniCode===e});this.isIncludeIncome=-1!==t[0].Name.indexOf("收入")},addRow:function(){var e=1;this.addObj.DefaultSettingContent.length>0&&(e=this.addObj.DefaultSettingContent[this.addObj.DefaultSettingContent.length-1].Id+1),this.addObj.DefaultSettingContent.push({Id:e,DefaultValue:0,OrgRange:[],JobLevel:[],Note:""})},deleteRow:function(e,t){t.splice(e,1);var a=1;this.addObj.DefaultSettingContent=this.addObj.DefaultSettingContent.map(function(e){return{Id:a++,DefaultValue:e.DefaultValue,OrgRange:e.OrgRange,JobLevel:e.JobLevel,Note:e.Note}})},handleOrgRang:function(e){var t=this;this.tidVisible=!0,this.selectIndex=e.Id,this.TidArrTree.length>0&&this.$nextTick(function(){t.$refs.tree.setCheckedKeys([]),t.$refs.tree.setCheckedKeys(e.OrgRange)})},orgTreeSure:function(){var e=this;this.tidVisible=!1;var t=this.$refs.tree.getCheckedNodes(),a=[];t.forEach(function(e){var t=e.value;a.push(t)}),this.addObj.DefaultSettingContent.forEach(function(t){t.Id===e.selectIndex&&(t.OrgRange=a)})},editorProject:function(e){this.addObj=(0,s.default)(this.addObj,e),this.addObj.BeginDate=new Date(this.replaceTime(this.addObj.BeginDate)),this.addObj.Status=1===this.addObj.Status,this.hire=1===this.addObj.WithHoldingClause.Hire,this.addObj.WithHoldingClause.LateCount>0?(this.lateCount=this.addObj.WithHoldingClause.LateCount,this.chooseVal=1):this.addObj.WithHoldingClause.LateDuration>0&&(this.lateCount=this.addObj.WithHoldingClause.LateDuration,this.chooseVal=2),this.addObj.PayLogicName?this.isShowDefaultSet=-1!==e.PayLogicName.indexOf("预设"):this.isShowDefaultSet=!1},show:function(e){this._getDic(),this.dialogFormVisible=!0,this.addObj.Remark="",this.hire=!1,this.leave=0,this.absenteeism=0,this.lateCount=0,this.addObj.TaxType=e},close:function(){this.$refs.formDom.resetFields(),console.log(this.addObj),this.dialogFormVisible=!1},editorType:function(e){this.title="编辑项目",this.show(),this.editorProject(e)},sure:function(){var e=this,t=0,a=0;2===this.chooseVal&&(t=this.lateCount),1===this.chooseVal&&(a=this.lateCount),this.$refs.formDom.validate(function(r){if(r){e.addObj.Status=e.addObj.Status?1:0,e.addObj.AttributeName=e.translateName(e.addObj.AttributeCode,e.AttributeCode),e.addObj.TypeName=e.translateName(e.addObj.TypeCode,e.TypeCode),e.addObj.PayMethodName=e.translateName(e.addObj.PayMethodCode,e.PayMethodCode),e.addObj.WithHoldingClause=(0,s.default)(e.addObj.WithHoldingClause,{Hire:e.hire?1:0,LateCount:a,LateDuration:t}),e.isShowDefaultSet&&e.addObj.DefaultSettingContent.forEach(function(e){if(e.DefaultValue<=0)return f.Message.error("请输入预设金额！"),!1}),e.addObj.DefaultSettingContent.forEach(function(t){t.Unit=e.defaultSetUnit});var n=(0,s.default)({},e.addObj);n.SchemeCode=e.SchemeCode,(0,p.addTerm)((0,o.default)(n)).then(function(t){t.data.State===h.REQ_OK?("新增项目"===e.title?f.Message.success("新增薪资项目成功！"):f.Message.success("修改薪资项目成功！"),e.$emit("updateSuccess"),e.$refs.formDom.resetFields(),e.dialogFormVisible=!1):f.Message.error("更新薪资项目失败，请重试！")}).catch(function(){f.Message.error("更新薪资项目失败，请重试！")})}})},translateName:function(e,t){return t.filter(function(t){return t.UniCode===e})[0].Name},recursionFn:function(e){var t=this,a=[];return e.forEach(function(e){var r=void 0;r=e.Child&&e.Child.length>0?{value:e.OrgCode,label:e.OrgName,children:t.recursionFn(e.Child)}:{value:e.OrgCode,label:e.OrgName},a.push(r)}),a},replaceTime:function(e){if(e){var t=e.replace("/Date(","");return t=t.replace(")/",""),parseInt(t)}}},watch:{TermList:{handler:function(e,t){this.projectList=e}},deep:!0}}},"1fjp":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-salary"},[a("el-form",{ref:"ruleForm",staticClass:"small-space",attrs:{"label-position":"left",model:e.strJson1,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"方案名称：",prop:"Name"}},[a("el-input",{attrs:{placeholder:"请输入方案名称"},model:{value:e.strJson1.Name,callback:function(t){e.$set(e.strJson1,"Name",t)},expression:"strJson1.Name"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计薪开始月：",prop:"BeginMonth"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.strJson1.BeginMonth,callback:function(t){e.$set(e.strJson1,"BeginMonth",t)},expression:"strJson1.BeginMonth"}},e._l(e.BeginMonth,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计薪开始日：",prop:"BeginDate"}},[a("days",{attrs:{errorText:"请选择计薪开始日",date:e.strJson1.BeginDate},on:{changeDay:e.BeginDateFn}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计薪结束月：",prop:"EndMonth"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.strJson1.EndMonth,callback:function(t){e.$set(e.strJson1,"EndMonth",t)},expression:"strJson1.EndMonth"}},e._l(e.EndMonth,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计薪结束日：",prop:"EndDate"}},[a("days",{attrs:{errorText:"请选择计薪结束日",date:e.strJson1.EndDate},on:{changeDay:e.EndDateFn}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发薪周期：",prop:"PayRecycle"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:e.PayRecycleChange},model:{value:e.strJson1.PayRecycle,callback:function(t){e.$set(e.strJson1,"PayRecycle",t)},expression:"strJson1.PayRecycle"}},e._l(e.PayRecycle,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"发薪日期：",prop:"PayDateContentM1"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"110px"},attrs:{placeholder:"请选择"},model:{value:e.strJson1.PayDateContentM1,callback:function(t){e.$set(e.strJson1,"PayDateContentM1",t)},expression:"strJson1.PayDateContentM1"}},e._l(e.PayDateContent1,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Label,value:e.Value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"form-item",staticStyle:{display:"inline-block"},attrs:{prop:"PayDateContentD1"}},[a("days",{attrs:{errorText:"请选择发薪日",date:e.strJson1.PayDateContentD1},on:{changeDay:e.PayDateContentFn1}})],1),e._v(" "),e.times?a("span",[e._v(" -- ")]):e._e(),e._v(" "),e.times?a("el-form-item",{staticClass:"form-item",staticStyle:{display:"inline-block","margin-left":"0"},attrs:{prop:"PayDateContentM2"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"110px"},attrs:{placeholder:"请选择"},model:{value:e.strJson1.PayDateContentM2,callback:function(t){e.$set(e.strJson1,"PayDateContentM2",t)},expression:"strJson1.PayDateContentM2"}},e._l(e.PayDateContent2,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Label,value:e.Value}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.times,expression:"times"}],staticClass:"form-item",staticStyle:{display:"inline-block"},attrs:{prop:"PayDateContentD2"}},[a("days",{attrs:{errorText:"请选择发薪日",date:e.strJson1.PayDateContentD2},on:{changeDay:e.PayDateContentFn2}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"对应社保扣减月：",prop:"SSDeduce"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.strJson1.SSDeduce,callback:function(t){e.$set(e.strJson1,"SSDeduce",t)},expression:"strJson1.SSDeduce"}},e._l(e.SSDeduce,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"社保数据来源：",prop:"SSDataSource"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.strJson1.SSDataSource,callback:function(t){e.$set(e.strJson1,"SSDataSource",t)},expression:"strJson1.SSDataSource"}},e._l(e.SSDataSource,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"考勤数据来源：",prop:"CADataSource"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.strJson1.CADataSource,callback:function(t){e.$set(e.strJson1,"CADataSource",t)},expression:"strJson1.CADataSource"}},e._l(e.CADataSource,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"row-item el-select",attrs:{label:"选择组织人员：",prop:"Tid"}},[a("div",{staticClass:"div-selected",model:{value:e.strJson1.Tid,callback:function(t){e.$set(e.strJson1,"Tid",t)},expression:"strJson1.Tid"}},[a("span",e._l(e.strJson1.TidArr,function(t){return a("span",{key:t.value,staticClass:"el-tag el-tag--info el-tag--small"},[a("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.label))]),e._v(" "),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(a){return e.delOrgIem(t)}}})])}),0)]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setCheckedNode()}}},[e._v("选择")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"方案描述："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.strJson1.Remark,callback:function(t){e.$set(e.strJson1,"Remark",t)},expression:"strJson1.Remark"}})],1)],1)],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("提示")])]),e._v(" "),e._l(e.PromptArr,function(t){return a("div",{key:t,staticClass:"text item"},[e._v("\n      "+e._s(t)+"\n    ")])})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next()}}},[e._v("下一步")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"选择组织",visible:e.tidVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"show-close":!1,"append-to-body":""}},[a("el-tree",{ref:"tree",attrs:{data:e.tidList,"show-checkbox":"","node-key":"value","expand-on-click-node":"","highlight-current":"",props:e.defaultProps}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tidVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getCheckedNodes()}}},[e._v("确定")])],1)],1)],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},"38KS":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compute-method mg-30"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("运算原理")])]),e._v(" "),e._l(e.PromptArr,function(t){return a("div",{key:t,staticClass:"text item"},[e._v("\n      "+e._s(t)+"\n    ")])})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.done()}}},[e._v("完 成")])],1)],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},"5uaJ":function(e,t,a){var r=a("xrI4");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("021c66d8",r,!0,{})},"6MeS":function(e,t,a){"use strict";function r(e){a("wFpB")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("850d"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("38KS"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},"7S8D":function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("zL8q"),o=a("Qiuq"),i=r(o),s=a("Om3j"),l=r(s),c=a("K8NO"),d=r(c),u=a("6MeS"),h=r(u);t.default={data:function(){return{title:"新增薪资方案",isDialogNotice:!0,active:0,isLeave:!1,strJson1:null,strJson2:null,strJson3:null,projectObj:{},SchemeCode:"",TidArr:[]}},created:function(){this.$route.query.code&&(this.title="编辑薪资方案")},methods:{pre:function(){this.active--},cancel:function(){var e=this;n.MessageBox.confirm("还未保存方案，是否确认离开?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.isLeave=!0,e.$router.back()}).catch(function(){})},next:function(e){0===this.active?(this.TidArr=e,this.active++):1===this.active?this.active++:2===this.active&&this.active++},done:function(){this.isLeave=!0,this.$router.push({path:"/salary/salaryRule"})}},beforeRouteLeave:function(e,t,a){this.isLeave?a():window.confirm("还未保存方案，是否确认离开?")?a():a(!1)},components:{SetSalary:i.default,SetProject:l.default,SetApprove:d.default,ComputeMethod:h.default}}},"7dMQ":function(e,t,a){var r=a("8r8g");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("ff9d96bc",r,!0,{})},"850d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{PromptArr:["1. 收入合计 = 税前收入项 + 税后收入项 + 免税收入项","2. 扣减合计 = 税前扣减项 + 税后扣减项 + 应纳税额 - 扣除境外缴纳的个税","3. 实发合计 = 收入合计 - 扣减合计","4. 应纳税总额 = 税前收入项 - 税前扣减项","5. 应纳税所得额 = 税前收入项 - 税前扣减项 - 个税起征点","6. 应纳税额 = 应纳税所得额 * 对应税级的税率 - 速算扣除数","7. 应扣缴税额 = 应纳税额 - 扣除境外缴纳的个税"]}},methods:{pre:function(){this.$emit("pre")},cancel:function(){this.$emit("cancel")},done:function(){this.$emit("done")}}}},"8r8g":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".set-salary{padding:30px}.set-salary .form-item .el-form-item__content{margin-left:0!important}.set-salary .row-item .div-selected{display:inline-block;line-height:normal;max-width:282px;min-width:282px;min-height:38px;border:1px solid #d8dce5;border-radius:4px;vertical-align:top}.set-salary .dialog-footer{margin:0 auto;text-align:center;margin-top:40px}",""])},K8NO:function(e,t,a){"use strict";function r(e){a("t+jL")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("yFbX"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("W7hT"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},LJtj:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetPayRecyle"}})}function o(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetTermProject"}})}function i(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetTermAttribute"}})}function s(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetTermType"}})}function l(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetPayRule"}})}function c(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetPayFrequency"}})}function d(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetPayMethod"}})}function u(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetPayLogic"}})}function h(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetJobLevel"}})}function p(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetOffWorkType"}})}function f(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetEmpType"}})}function m(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetEmpStatus"}})}function g(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetCurrency"}})}function v(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetTaxType"}})}function y(){return(0,Se.default)({url:"/Wage/Dic",method:"post",data:{Method:"GetCityList"}})}function b(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetList",PageSize:e,PageIndex:t}})}function C(e,t,a){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"AddOne",strJson1:e,strJson2:t,strJson3:a}})}function S(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"CopyOne",SchemeCode:e,SchemeName:t}})}function _(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"ChangeSchemeStatus",Code:e,Status:t}})}function x(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetSchemeDetail",SchemeCode:e}})}function D(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"CheckUniqueName",Name:e,Code:t}})}function T(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetSchemeOrgList",SchemeCode:e}})}function P(e,t){return(0,Se.default)({url:"/Wage/Scheme ",method:"post",data:{Method:"GetTermList",SchemeCode:e,TaxType:t}})}function O(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"ChangeTermStatus",Code:e,Status:t}})}function M(e,t,a){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"CheckUniqueTermName",Code:a,Name:e,SchemeCode:t}})}function j(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetRelStructList",SchemeCode:e}})}function k(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"AddTerm",strJson:e}})}function w(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetTerm",Code:e}})}function R(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"UpdateCheckPosition",SchemeCode:e,PositionCode:t}})}function L(e){return(0,Se.default)({url:"/Wage/WageReport",method:"post",data:(0,be.default)({Method:"GetEmpTermList"},e)})}function E(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetSchemeEmpList",SchemeCode:e,PageIndex:1,PageSize:9999}})}function N(e){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:(0,be.default)({Method:"AddOne"},e)})}function J(e){return(0,Se.default)({url:"/Wage/IO",method:"post",data:{Method:"BuildEmpTermTemplate",SchemeCode:e}})}function W(e,t){var a=new FormData;console.log(e);for(var r=0;r<e.length;r++)a.append(e[r].name,e[r]);return a.append("Method","UploadEmpTerm"),a.append("companyCode",xe.default.getters.companyCode),a.append("TokenId",(0,De.getToken)()),a.append("SchemeCode",t.SchemeCode),console.log(Date.parse(t.OnDate)),a.append("OnDate",t.OnDate.toISOString()),(0,Se.default)({url:"/Wage/IO",method:"post",noQS:!0,headers:{"Content-Type":"multipart/form-data"},data:a})}function F(e){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:(0,be.default)({Method:"GetEmpTermChangeLogList"},e)})}function A(e){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:(0,be.default)({Method:"GetWageReportList"},e)})}function $(e){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:(0,be.default)({Method:"AddOne"},e)})}function q(e,t,a){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:{Method:"Process",Code:e,OP:t,Remark:a}})}function U(e){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:(0,be.default)({Method:"GetEmpWageReportList"},e)})}function I(e,t,a){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:{Method:"GetFlowIdList",SchemeCode:e,OnYear:t,OnMonth:a}})}function V(e,t){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:{Method:"RunEmpReport",ReportCode:e,EmpIds:t}})}function K(e,t,a){return(0,Se.default)({url:"/Wage/WageReport ",method:"post",data:{Method:"GetSingleEmpReport",EmpId:e,OnYear:t,SchemeCode:a}})}function G(e,t,a){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:{Method:"GetEmpTermListByEmpId",EmpId:e,SchemeCode:t,type:a}})}function Q(e){return(0,Se.default)({url:"/Wage/WageReport",method:"post",data:(0,be.default)({Method:"GetCommitWageReportList"},e)})}function B(e){return(0,Se.default)({url:"/Wage/WageReport",method:"post",data:(0,be.default)({Method:"ApprovalReport"},e)})}function z(e){return(0,Se.default)({url:"/Wage/WageReport",method:"post",data:{Method:"GetRemarkList",ReportCode:e}})}function H(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetPayRollList",SchemeCode:e}})}function Y(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"UpdatePayRollSort",SchemeCode:e,strJson:t}})}function X(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetNormalTermList",SchemeCode:e}})}function Z(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetOnceTermList",SchemeCode:e}})}function ee(e){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:(0,be.default)({Method:"AddTaxCity"},e)})}function te(e){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:(0,be.default)({Method:"UpdateTaxCity"},e)})}function ae(e){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:{Method:"GetEmpTaxCityList",EmpId:e}})}function re(e,t){return(0,Se.default)({url:"/Wage/EmpTerm",method:"post",data:{Method:"DeleteEmpTaxCity",CityId:e,EmpId:t}})}function ne(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:(0,be.default)({Method:"GetEmpSchemeList"},e)})}function oe(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"EditEmpScheme",EmpId:e,SchemeCode:t}})}function ie(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"AddEmpScheme",EmpId:e,SchemeCode:t}})}function se(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"DeleteEmpScheme",Id:e}})}function le(e){console.log(e);for(var t=new FormData,a=0;a<e.length;a++)t.append(e[a].name,e[a]);return t.append("Method","UploadEmpScheme"),t.append("companyCode",xe.default.getters.companyCode),t.append("TokenId",(0,De.getToken)()),(0,Se.default)({url:"/Wage/IO",method:"post",noQS:!0,headers:{"Content-Type":"multipart/form-data"},data:t})}function ce(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"ChangeEmpSchemeStatus",Id:e,State:t}})}function de(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetAmerce",SchemeCode:e,A_Type:t}})}function ue(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"SaveAmerce",SchemeCode:e,strJson:t}})}function he(e,t,a){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"UpdateAmerceStatus",SchemeCode:e,A_Type:t,Status:a}})}function pe(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetWithdrawingForLeave",SchemeCode:e,A_Type:t}})}function fe(e,t,a){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"UpdateWithdrawingForLeaveStatus",SchemeCode:e,A_Type:t,Status:a}})}function me(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"SaveWithdrawingForLeave",SchemeCode:e,strJson:t}})}function ge(e){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"GetOverTime",SchemeCode:e}})}function ve(e,t){return(0,Se.default)({url:"/Wage/Scheme",method:"post",data:{Method:"SaveOverTime",SchemeCode:e,strJson:t}})}Object.defineProperty(t,"__esModule",{value:!0});var ye=a("Dd8w"),be=r(ye);t.getPayRecyle=n,t.getTermProject=o,t.getTermAttribute=i,t.getTermType=s,t.getPayRule=l,t.getPayFrequency=c,t.getPayMethod=d,t.getPayLogic=u,t.getJobLevel=h,t.getOffWorkType=p,t.getEmpType=f,t.getEmpStatus=m,t.getCurrency=g,t.getTaxType=v,t.getCityList=y,t.getSalaryList=b,t.addProject=C,t.copyOne=S,t.changeSchemeStatus=_,t.getSchemeDetail=x,t.checkUniqueName=D,t.getSchemeOrgList=T,t.getTermList=P,t.changeTermStatus=O,t.checkUniqueTermName=M,t.getRelStructList=j,t.addTerm=k,t.getTerm=w,t.updateCheckPosition=R,t.getEmpTermList=L,t.getSchemeEmpList=E,t.addOneEmpTerm=N,t.buildEmpTermTemplate=J,t.uploadEmpTerm=W,t.getEmpTermChangeLogList=F,t.getWageReportList=A,t.addOneReport=$,t.process=q,t.getEmpWageReportList=U,t.getFlowIdList=I,t.runEmpReport=V,t.getSingleEmpReport=K,t.getEmpTermListByEmpId=G,t.getCommitWageReportList=Q,t.approvalReport=B,t.getRemarkList=z,t.getPayRollList=H,t.updatePayRollSort=Y,t.getNormalTermList=X,t.getOnceTermList=Z,t.addTaxCity=ee,t.UpdateTaxCity=te,t.getEmpTaxCityList=ae,t.deleteEmpTaxCity=re,t.getEmpSchemeList=ne,t.editEmpScheme=oe,t.addEmpScheme=ie,t.deleteEmpScheme=se,t.uploadEmpScheme=le,t.changeEmpSchemeStatus=ce,t.getAmerce=de,t.saveAmerce=ue,t.updateAmerceStatus=he,t.getWithdrawingForLeave=pe,t.updateWithdrawingForLeaveStatus=fe,t.saveWithdrawingForLeave=me,t.getOverTime=ge,t.saveOverTime=ve;var Ce=a("Vo7i"),Se=r(Ce),_e=a("IcnI"),xe=r(_e),De=a("TIfe")},NHr3:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".compute-method .item{padding:5px}.compute-method .item:nth-child(odd){background:#e6ebf5}",""])},Om3j:function(e,t,a){"use strict";function r(e){a("qXdw")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("WAnw"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("v8nW"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},Qiuq:function(e,t,a){"use strict";function r(e){a("7dMQ")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("oBbK"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("1fjp"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},"Tj+u":function(e,t,a){"use strict";function r(e){a("5uaJ")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("7S8D"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("VMD1"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},VMD1:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-project"},[a("el-dialog",{staticStyle:{"min-width":"1000px"},attrs:{title:e.title,visible:e.isDialogNotice,"before-close":e.cancel,"show-close":!1,modal:!1,center:"",fullscreen:"","modal-append-to-body":!1},on:{"update:visible":function(t){e.isDialogNotice=t}}},[a("div",{staticClass:"content"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"薪资设置"}}),e._v(" "),a("el-step",{attrs:{title:"薪资项目"}}),e._v(" "),a("el-step",{attrs:{title:"薪资审批人"}}),e._v(" "),a("el-step",{attrs:{title:"运算原理"}})],1),e._v(" "),0===e.active?a("set-salary",{on:{next:e.next,cancel:e.cancel}}):e._e(),e._v(" "),1===e.active?a("set-project",{attrs:{TidArr:e.TidArr},on:{next:e.next,pre:e.pre,cancel:e.cancel}}):e._e(),e._v(" "),2===e.active?a("set-approve",{on:{next:e.next,pre:e.pre,cancel:e.cancel}}):e._e(),e._v(" "),3===e.active?a("compute-method",{on:{done:e.done,pre:e.pre,cancel:e.cancel}}):e._e()],1)]),e._v(" "),a("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}]})],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},W7hT:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-approve"},[a("div",{staticStyle:{"text-align":"center"}},[a("el-cascader",{attrs:{options:e.options,placeholder:"试试搜索：市场部","change-on-select":"",clearable:"",filterable:""},on:{change:e.handleFilter},model:{value:e.param.ParentOrgCode,callback:function(t){e.$set(e.param,"ParentOrgCode",t)},expression:"param.ParentOrgCode"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"400px","margin-bottom":"20px"},attrs:{placeholder:"请输入审批人名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.param.KeyWord,callback:function(t){e.$set(e.param,"KeyWord",t)},expression:"param.KeyWord"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-table",{staticStyle:{width:"715px",margin:"0 auto"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"选择",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.PositionCode},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"PositionName",label:"名称"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.pre()}}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next()}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1)])},n=[],o={render:r,staticRenderFns:n};t.a=o},WAnw:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),o=r(n),i=a("Dd8w"),s=r(i),l=a("T452"),c=a("LJtj"),d=a("zL8q"),u=a("v+/x"),h=r(u),p=a("NYxO");t.default={props:{TidArr:{type:Array,default:function(){return[]}}},data:function(){return{activeNames:[],TermProjectDic:[],TermList:[],TaxType:[],multipleSelection:[],activeName:"",isVisibleAddProjectType:!1,SchemeCode:""}},created:function(){this.SchemeCode=this.schemeCode,this._getTermProject(),this._getTaxType()},computed:(0,s.default)({},(0,p.mapGetters)(["schemeCode"])),methods:{_getTermProject:function(){var e=this;(0,c.getTermProject)().then(function(t){t.data.State===l.REQ_OK&&(t.data.State===l.REQ_OK?e.TermProjectDic=t.data.Data:d.Message.error("获取所属项目失败，请重试！"))}).catch(function(){d.Message.error("获取所属项目失败，请重试！")})},_getTermList:function(){var e=this;this.activeName&&(0,c.getTermList)(this.$route.query.code||this.SchemeCode,this.activeName).then(function(t){t.data.State===l.REQ_OK?(e.TermList=t.data.Data,e.TermProjectDic=e.foreachFn(e.TermProjectDic,e.TermList)):d.Message.error("获取薪资项目列表失败，请重试！")}).catch(function(){d.Message.error("获取薪资项目列表失败，请重试！")})},_getTaxType:function(){var e=this;(0,c.getTaxType)().then(function(t){t.data.State===l.REQ_OK?(e.TaxType=t.data.Data,e.activeName=e.TaxType[0].UniCode,e._getTermList()):d.Message.error("获取计税类型列表失败，请重试！")}).catch(function(){d.Message.error("获取计税类型列表失败，请重试！")})},_updateTermList:function(){var e=this;(0,c.getTermList)(this.$route.query.code||this.SchemeCode,this.activeName).then(function(t){t.data.State===l.REQ_OK?(e.TermList=t.data.Data,e.TermProjectDic=e.foreachFn(e.TermProjectDic,e.TermList)):d.Message.error("更新列表失败，请重试！")}).catch(function(){d.Message.error("更新列表失败，请重试！")})},changeProjectState:function(e){for(var t=this,a=document.getElementById("el-collapse").getElementsByTagName("tbody"),r=[],n=0;n<a.length;n++)for(var i=a[n].getElementsByTagName("tr"),s=0;s<i.length;s++){var u=i[s].getElementsByTagName("label")[0].classList.contains("is-checked");if(u){var h=i[s].getElementsByClassName("data")[0].getAttribute("data-id");r.push(h)}}(0,c.changeTermStatus)((0,o.default)(r),e).then(function(e){e.data.State===l.REQ_OK?(d.Message.success("更改状态成功！"),t._getTermList()):d.Message.error("更改状态失败，请重试！")}).catch(function(){d.Message.error("更改状态失败，请重试！")})},rowClick:function(e){this.$refs[e.OperateCode][0].toggleRowSelection(e)},startOrStop:function(e){var t=this;(0,c.changeTermStatus)(e.Code,1===e.Status?0:1).then(function(e){e.data.State===l.REQ_OK?(d.Message.success("更改状态成功！"),t._getTermList()):d.Message.error("更改状态失败，请重试！")}).catch(function(){d.Message.error("更改状态失败，请重试！")})},foreachFn:function(e,t){var a=this,r=[];return e.forEach(function(e){a.activeNames.push(e.Name);var n={Name:e.Name,UniCode:e.UniCode,OperateCode:e.OperateCode,children:a.foreachChildFn(e.UniCode,t)};r.push(n)}),r},foreachChildFn:function(e,t){return t.filter(function(t){return e===t.ProjectCode})},handleCreate:function(e){var t=this;console.log(e),"string"==typeof e?(0,c.getTerm)(e).then(function(e){e.data.State===l.REQ_OK?(t.isVisibleAddProjectType=!0,t.$refs.addProjectType.editorType(e.data.Data)):d.Message.error("项目详情加载失败，请重试！")}).catch(function(){d.Message.error("项目详情加载失败，请重试！")}):this.$refs.addProjectType.show(this.activeName)},handleClick:function(){this._getTermList()},addSuccess:function(e){this.TermProjectDic.forEach(function(t){t.UniCode===e.ProjectCode&&(e.Code&&(t.children=t.children.filter(function(t){return t.Code!==e.Code})),t.children.push(e))}),this.TermList.push(e)},updateSuccess:function(){this._updateTermList()},handleSelectionChange:function(e){this.multipleSelection=e},select:function(e,t){},selectAll:function(e,t){},pre:function(){this.$emit("pre")},next:function(){this.$emit("next")},cancel:function(){this.$emit("cancel")}},watch:{},components:{AddProjectType:h.default}}},bYqC:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,"custom-class":"add-type",visible:e.dialogFormVisible,center:"",width:"950px","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"lock-scroll":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-input",{attrs:{placeholder:"请输入项目名称","suffix-icon":"el-icon-search",debounce:""},on:{change:e.searchChange},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),e._l(e.projectList,function(t){return 1===t.Status?a("div",{key:t.Name,staticClass:"text item",on:{click:function(a){return e.editorProject(t)}}},[e._v("\n      "+e._s(t.Name)+"\n    ")]):e._e()})],2),e._v(" "),a("el-form",{ref:"formDom",staticClass:"small-space",attrs:{model:e.addObj,"label-width":"85px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属项目",prop:"ProjectCode"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.addObj.ProjectCode,callback:function(t){e.$set(e.addObj,"ProjectCode",t)},expression:"addObj.ProjectCode"}},e._l(e.ProjectCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{staticStyle:{"margin-bottom":"5px"},attrs:{"active-text":"启用","inactive-text":"停用"},model:{value:e.addObj.Status,callback:function(t){e.$set(e.addObj,"Status",t)},expression:"addObj.Status"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"项目名称",prop:"Name"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.addObj.Name,callback:function(t){e.$set(e.addObj,"Name",t)},expression:"addObj.Name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"生效日期",prop:"BeginDate"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期时间","picker-options":e.pickerOptions},model:{value:e.addObj.BeginDate,callback:function(t){e.$set(e.addObj,"BeginDate",t)},expression:"addObj.BeginDate"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目属性",prop:"AttributeCode"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.addObj.AttributeCode,callback:function(t){e.$set(e.addObj,"AttributeCode",t)},expression:"addObj.AttributeCode"}},e._l(e.AttributeCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目类型",prop:"TypeCode"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.addObj.TypeCode,callback:function(t){e.$set(e.addObj,"TypeCode",t)},expression:"addObj.TypeCode"}},e._l(e.TypeCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格式规则",prop:"Scale"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.addObj.Scale,callback:function(t){e.$set(e.addObj,"Scale",t)},expression:"addObj.Scale"}},e._l(e.Scale,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"取值方式",prop:"RoundType"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.addObj.RoundType,callback:function(t){e.$set(e.addObj,"RoundType",t)},expression:"addObj.RoundType"}},e._l(e.RoundType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{width:"97%"},attrs:{label:"员工类型",prop:"EmpTypeRange"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addObj.EmpTypeRange,callback:function(t){e.$set(e.addObj,"EmpTypeRange",t)},expression:"addObj.EmpTypeRange"}},e._l(e.EmpTypeRange,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发放规则",prop:"PayRuleId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:e.handlePayRule},model:{value:e.addObj.PayRuleId,callback:function(t){e.$set(e.addObj,"PayRuleId",t)},expression:"addObj.PayRuleId"}},e._l(e.PayRuleId,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发放频率",prop:"PayFrequencyCode"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"105px"},attrs:{placeholder:"请选择"},on:{change:e.handlePayFrequency},model:{value:e.addObj.PayFrequencyCode,callback:function(t){e.$set(e.addObj,"PayFrequencyCode",t)},expression:"addObj.PayFrequencyCode"}},e._l(e.PayFrequencyCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1),e._v(" "),a("el-select",{staticClass:"filter-item input-unit",staticStyle:{width:"105px"},attrs:{placeholder:"请选择"},model:{value:e.addObj.PayMethodCode,callback:function(t){e.$set(e.addObj,"PayMethodCode",t)},expression:"addObj.PayMethodCode"}},e._l(e.PayMethodCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算逻辑",prop:"PayLogic"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},on:{change:e.handlePayLogic},model:{value:e.addObj.PayLogicCode,callback:function(t){e.$set(e.addObj,"PayLogicCode",t)},expression:"addObj.PayLogicCode"}},e._l(e.PayLogicCode,function(e){return a("el-option",{key:e.UniCode,attrs:{label:e.Name,value:e.UniCode}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDefaultSet,expression:"isShowDefaultSet"}],attrs:{label:"预设管理"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.addObj.DefaultSettingContent,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"Id",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DefaultValue",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small"},model:{value:t.row.DefaultValue,callback:function(a){e.$set(t.row,"DefaultValue",a)},expression:"scope.row.DefaultValue"}}),e._v(" "),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.defaultSetUnit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Note",label:"预设说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",autosize:"",maxlength:20},model:{value:t.row.Note,callback:function(a){e.$set(t.row,"Note",a)},expression:"scope.row.Note"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"OrgRange",label:"组织范围"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),e.handleOrgRang(t.row)}}},[e._v("\n              选择\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"JobLevel",label:"职等范围"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"jobLevel-select",attrs:{multiple:"",placeholder:"请选择"},model:{value:t.row.JobLevel,callback:function(a){e.$set(t.row,"JobLevel",a)},expression:"scope.row.JobLevel"}},e._l(e.JobLevel,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.addObj.DefaultSettingContent)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.addRow()}}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),e.isPayRulePercent?a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("项目构成")]),e._v(" "),a("el-select",{staticStyle:{width:"89%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addObj.DefaultSettingStruct,callback:function(t){e.$set(e.addObj,"DefaultSettingStruct",t)},expression:"addObj.DefaultSettingStruct"}},e._l(e.DefaultSettingStruct,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"请输入内容"},model:{value:e.addObj.Remark,callback:function(t){e.$set(e.addObj,"Remark",t)},expression:"addObj.Remark"}})],1),e._v(" "),e.isIncludeIncome?a("el-form-item",{attrs:{label:"提醒"}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("扣发规则：员工满足下列任一条件，将不享受该项发放")])]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-left":"83px"},model:{value:e.hire,callback:function(t){e.hire=t},expression:"hire"}},[e._v("本月入离职")]),e._v(" "),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"text"},[e._v("请假：")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.addObj.Leave,callback:function(t){e.$set(e.addObj,"Leave",t)},expression:"addObj.Leave"}}),e._v("\n          天\n        ")],1),e._v(" "),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"text"},[e._v("旷工：")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.addObj.Absenteeism,callback:function(t){e.$set(e.addObj,"Absenteeism",t)},expression:"addObj.Absenteeism"}}),e._v("\n          次\n        ")],1),e._v(" "),a("div",{staticClass:"demo-input-suffix"},[a("span",{staticClass:"text"},[e._v("迟到+早退：")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.lateCount,callback:function(t){e.lateCount=t},expression:"lateCount"}}),e._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.chooseVal,callback:function(t){e.chooseVal=t},expression:"chooseVal"}},e._l(e.timesOrMin,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure()}}},[e._v("确 定")])],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"选择组织",visible:e.tidVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,modal:!1,"append-to-body":"","custom-class":"org-dialog"}},[a("el-tree",{ref:"tree",attrs:{data:e.TidArrTree,"show-checkbox":"","node-key":"value","expand-on-click-node":"","highlight-current":"",props:e.defaultOrgRang}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tidVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orgTreeSure()}}},[e._v("确定")])],1)],1)],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},gADI:function(e,t,a){var r=a("lb6w");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("30e8408a",r,!0,{})},jFXW:function(e,t,a){var r=a("k/tN");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("7458bce5",r,!0,{})},jTRS:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".set-project{padding:30px}.set-project .el-tabs{width:460px;display:inline-block}.set-project .el-tabs .el-tabs__nav-wrap:after{background-color:#fff}.set-project .dialog-footer{margin:0 auto;text-align:center;margin-top:40px}.set-project .cell{text-align:center}",""])},"k/tN":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,'.add-type{height:700px;overflow:auto}.add-type .box-card{width:190px;display:inline-block;vertical-align:top}.add-type .box-card .clearfix:after,.add-type .box-card .clearfix:before{display:table;content:""}.add-type .box-card .clearfix:after{clear:both}.add-type .box-card .text{text-align:center;font-size:14px;margin-bottom:18px}.add-type .box-card .item{text-align:center;font-size:14px;padding:10px 0;margin-bottom:5px;background:#f0f2f5;border-radius:4px}.add-type .box-card .item:hover{color:#fff;background:#3b8be3;cursor:pointer}.add-type .small-space{display:inline-block;margin-left:30px;width:640px}.add-type .small-space .demo-input-suffix .text{display:inline-block;width:80px;text-align:right}.add-type .small-space .demo-input-suffix .el-input,.add-type .small-space .demo-input-suffix .el-input-number{width:200px!important}.add-type .small-space .input-unit input{text-overflow:ellipsis}.add-type .small-space .jobLevel-select .el-select__tags,.add-type .small-space .jobLevel-select input{height:40px!important;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.add-type .org-dialog .el-dialog__body{max-height:400px;overflow:auto}',""])},lb6w:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""])},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},oBbK:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),o=r(n),i=a("mvHQ"),s=r(i),l=a("Dd8w"),c=r(l),d=a("x31u"),u=r(d),h=a("LJtj"),p=a("vZz+"),f=a("T452"),m=a("zL8q"),g=a("NYxO");t.default={props:{},data:function(){return{projectObj:{},tidList:[],strJson1:{Name:null,BeginMonth:null,BeginDate:1,EndMonth:null,EndDate:1,PayRecycle:null,PayDateContent:null,PayDateContentM1:null,PayDateContentM2:1,PayDateContentD1:1,PayDateContentD2:1,SSDeduce:null,SSDataSource:null,CADataSource:null,CheckPosition:null,Remark:null,Tid:null,TidArr:[]},BeginMonth:[{value:-1,label:"上月"},{value:0,label:"当月"},{value:1,label:"次月"}],EndMonth:[{value:-1,label:"上月"},{value:0,label:"当月",disabled:!0},{value:1,label:"次月"}],PayRecycle:[],PayDateContent1:[],PayDateContent2:[],SSDeduce:[{value:-1,label:"上月"},{value:0,label:"当月",disabled:!0},{value:1,label:"次月"}],SSDataSource:[{value:1,label:"系统"},{value:2,label:"导入",disabled:!0}],CADataSource:[{value:1,label:"系统"},{value:2,label:"导入",disabled:!0}],defaultCheck:[],defaultProps:{children:"children",label:"label"},tidVisible:!1,PromptArr:["1. 计薪周期原则不可更改，如需改正请联系客服","2. 更改对应社保月，从当前计薪月开始计算生效","3. 若贵公司的考勤周期与计薪周期不一致，请先联系客服后再操作"],props:{value:"label",children:"cities"},times:!1,rules:{Name:[{validator:function(e,t,a){if(!t)return a(new Error("名称不能为空！"));(0,h.checkUniqueName)(t).then(function(e){e.data.State===f.REQ_OK?e.data.Data?a():a(new Error("名称已存在！")):a(new Error("名称校验失败，请重试！"))}).catch(function(){a(new Error("请求超时，请重试！"))})},trigger:"change"}],BeginMonth:[{type:"number",required:!0,message:"请选择计薪开始月",trigger:"change"}],BeginDate:[{type:"number",required:!0,message:"请选择计薪开始日",trigger:"change"}],EndMonth:[{type:"number",required:!0,message:"请选择计薪结束日",trigger:"change"}],EndDate:[{type:"number",required:!0,message:"请选择计薪开始日",trigger:"change"}],PayRecycle:[{type:"string",required:!0,message:"请选择发薪周期",trigger:"change"}],PayDateContentM1:[{type:"string",required:!0,message:"请选择发薪月",trigger:"change"}],PayDateContentM2:[{type:"string",required:!0,message:"请选择发薪月",trigger:"change"}],PayDateContentD1:[{type:"number",required:!0,message:"请选择发薪日",trigger:"change"}],PayDateContentD2:[{type:"number",required:!0,message:"请选择发薪日",trigger:"change"}],SSDeduce:[{type:"number",required:!0,message:"请选择对应社保扣减月",trigger:"change"}],SSDataSource:[{type:"number",required:!0,message:"请选择社保数据来源",trigger:"change"}],CADataSource:[{type:"number",required:!0,message:"请选择考勤数据来源",trigger:"change"}],Tid:[{type:"string",required:!0,message:"请选择组织人员",trigger:"change"}]}}},created:function(){(this.$route.query.code||this.schemeCode)&&this._getSchemeDetail(),this._getPayRecyle(),this._getOrgList()},computed:(0,c.default)({},(0,g.mapGetters)(["schemeCode"])),mounted:function(){},methods:(0,c.default)({_getSchemeDetail:function(){var e=this;(0,h.getSchemeDetail)(this.$route.query.code||this.schemeCode).then(function(t){t.data.State===f.REQ_OK?e.projectObj=t.data.Data:m.Message.error("获取方案详情失败，请重试！")}).catch(function(){m.Message.error("获取方案详情失败，请重试！")})},_getPayRecyle:function(){var e=this;(0,h.getPayRecyle)().then(function(t){if(t.data.State===f.REQ_OK){var a=[],r=t.data.Data;r&&(r.forEach(function(e){var t={value:e.UniCode,label:e.Name,times:e.OperateCode.slice(1),child:e.Selector};a.push(t)}),e.PayRecycle=a)}else m.Message.error("发薪日期获取失败，请刷新重试！")}).catch(function(){m.Message.error("发薪日期获取失败，请刷新重试！")})},_getOrgList:function(){var e=this;(0,p.getOrgList)().then(function(t){if(t.data.State===f.REQ_OK){var a=t.data.Data;e.tidList=e.recursionFn(a)}else m.Message.error("组织列表获取失败，请重试！")}).catch(function(){m.Message.error("组织列表获取失败，请重试！")})},BeginDateFn:function(e){this.strJson1.BeginDate=e,this.$refs.ruleForm.validateField("BeginDate")},EndDateFn:function(e){this.strJson1.EndDate=e,this.$refs.ruleForm.validateField("EndDate")},setCheckedNode:function(){var e=this;this.tidVisible=!0,this.strJson1.TidArr.length>0&&this.$nextTick(function(){e.$refs.tree.setCheckedKeys([]),e.$refs.tree.setCheckedKeys(e.defaultCheck)})},getCheckedNodes:function(){var e=this;this.tidVisible=!1;var t=this.$refs.tree.getCheckedNodes(),a=[];this.defaultCheck=[],t.forEach(function(t){var r=t.label,n=t.value;a.push(r),e.defaultCheck.push(n)}),this.strJson1.Tid=a.toString(),this.strJson1.TidArr=t},delOrgIem:function(e){var t=this;this.strJson1.TidArr=this.strJson1.TidArr.filter(function(t){return t!==e});var a=[];this.defaultCheck=[],this.strJson1.TidArr.forEach(function(e){var r=e.label,n=e.value;a.push(r),t.defaultCheck.push(n)}),this.strJson1.Tid=a.toString()},next:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){e.checkedTimes();var a=e.getStrJson2();(0,h.addProject)((0,s.default)(e.strJson1),(0,s.default)(a)).then(function(t){t.data.State===f.REQ_OK?(e.SchemeCode=t.data.Data,e.setSchemeCode(t.data.Data),e.$emit("next",e.strJson1.TidArr),console.log(e.strJson1.TidArr)):m.Message.error("保存失败，请重试！")}).catch(function(){m.Message.error("保存失败，请重试！")})}})},cancel:function(){this.$emit("cancel")},getStrJson2:function(){var e=this.strJson1.TidArr,t=[];return e.forEach(function(e){var a=e.value;t.push(a)}),[{Tid:1,Code:t}]},PayRecycleChange:function(e){var t=this.PayRecycle.filter(function(t){return t.value===e});t&&"2"===t[0].times?(this.PayDateContent1=t[0].child,this.PayDateContent2=t[0].child,this.times=!0):(this.PayDateContent1=t[0].child,this.times=!1)},PayDateContentFn1:function(e){this.strJson1.PayDateContentD1=e,this.$refs.ruleForm.validateField("PayDateContentD1")},PayDateContentFn2:function(e){this.strJson1.PayDateContentD2=e,this.$refs.ruleForm.validateField("PayDateContentD2")},checkedTimes:function(){this.times?this.strJson1.PayDateContent=[{Month:this.strJson1.PayDateContentM1,Date:this.strJson1.PayDateContentD1},{Month:this.strJson1.PayDateContentM2,Date:this.strJson1.PayDateContentD2}]:this.strJson1.PayDateContent=[{Month:this.strJson1.PayDateContentM1,Date:this.strJson1.PayDateContentD1}]},recursionFn:function(e){var t=this,a=[];return e.forEach(function(e){var r=void 0;r=e.Child&&e.Child.length>0?{value:e.OrgCode,label:e.OrgName,children:t.recursionFn(e.Child)}:{value:e.OrgCode,label:e.OrgName},a.push(r)}),a},PayDateChange:function(e,t){var a=void 0;return this.PayRecycle.forEach(function(r){e===r.value&&(a=r.child.filter(function(e){return e.Value===t.toString()}))}),a[0].Label}},(0,g.mapMutations)({setSchemeCode:"SET_SCHEME_CODE"})),watch:{projectObj:{handler:function(e,t){function a(e){return e.forEach(function(e){var t={value:e.OrgCode,label:e.OrgName};e.Child&&e.Child.length>0&&a(e.Child),n.push(t)}),n}var r=this;this.strJson1=(0,o.default)(this.strJson1,e),this.strJson1.PayDateContentM1=this.strJson1.PayDate[0].Month.toString(),this.strJson1.PayDateContentD1=this.strJson1.PayDate[0].Date,this.strJson1.PayDate.length>1&&(this.strJson1.PayDateContentM2=this.strJson1.PayDate[1].Month.toString(),this.strJson1.PayDateContentD2=this.strJson1.PayDate[1].Date),this.PayRecycleChange(this.strJson1.PayRecycle);var n=[];this.strJson1.TidArr=a(this.strJson1.SchemeOrgList);var i=[];this.strJson1.TidArr.forEach(function(e){var t=e.label,a=e.value;i.push(t),r.defaultCheck.push(a)}),this.strJson1.Tid=i.toString()},deep:!0}},components:{Days:u.default}}},pcpY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{errorText:{type:String,default:""},date:{type:Number,default:null}},data:function(){return{days:[[1,2,3,4,5,6,7],[8,9,10,11,12,13,14],[15,16,17,18,19,20,21],[22,23,24,25,26,27,28],[29,30,31]],daysPick:!1,dayText:1}},created:function(){},methods:{focus:function(){this.daysPick=!0},blur:function(){this.daysPick=!1,this.changeDay()},chooseDay:function(e){this.dayText=e,this.$emit("changeDay",e)},changeDay:function(){this.$emit("changeDay",this.dayText)}},watch:{date:{handler:function(e,t){this.dayText=e},deep:!0}}}},qXdw:function(e,t,a){var r=a("jTRS");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("72f6f5d2",r,!0,{})},qkKv:function(e,t,a){var r=a("FeBl"),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},"t+jL":function(e,t,a){var r=a("wcti");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("4d442daf",r,!0,{})},"v+/x":function(e,t,a){"use strict";function r(e){a("jFXW")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("+xjT"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("bYqC"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},v8nW:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-project",attrs:{id:"set-project"}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"30px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("提示")])]),e._v(" "),a("div",{staticClass:"text item"},[e._v("\n      优惠奖金，离职补偿金，期权，劳务费等特殊计税项目，必须在已预留项目进行维护方可运算。\n    ")])]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.TaxType,function(e){return a("el-tab-pane",{key:e.UniCode,attrs:{label:e.Name,name:e.UniCode}})}),1),e._v(" "),a("div",{staticClass:"clear-float",staticStyle:{"margin-top":"7px",float:"right"}},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:e.handleCreate}},[e._v("\n      新增\n    ")]),e._v(" "),a("el-button",{staticClass:"stop-btn",attrs:{size:"small"},on:{click:function(t){return e.changeProjectState(0)}}},[e._v("\n      停用\n    ")]),e._v(" "),a("el-button",{staticClass:"start-btn",attrs:{size:"small"},on:{click:function(t){return e.changeProjectState(1)}}},[e._v("\n      启用\n    ")])],1),e._v(" "),a("el-collapse",{staticStyle:{width:"100%"},attrs:{id:"el-collapse"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.TermProjectDic,function(t){return a("el-collapse-item",{key:t.UniCode,attrs:{title:t.Name,name:t.Name}},[a("el-table",{ref:t.OperateCode,refInFor:!0,attrs:{data:t.children,border:"","highlight-current-row":""},on:{select:e.select,"select-all":e.selectAll,"row-click":e.rowClick}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目",align:"center",prop:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"data",attrs:{"data-id":t.row.Code}},[e._v("\n              "+e._s(t.row.Name)+"\n            ")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"类型",align:"center",prop:"TypeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"属性",align:"center",prop:"AttributeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"Status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(1===t.row.Status?"启用":"停用")}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"发放规则",align:"center",prop:"PayMethodName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},domProps:{innerHTML:e._s(1===t.row.Status?"停用":"启用")},on:{click:function(a){return e.startOrStop(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleCreate(t.row.Code)}}},[e._v("编辑\n            ")])]}}],null,!0)})],1)],1)}),1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.pre()}}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next()}}},[e._v("下一步")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1),e._v(" "),a("add-project-type",{ref:"addProjectType",attrs:{SchemeCode:e.SchemeCode,TermList:e.TermList,TidArr:e.TidArr},on:{addSuccess:e.addSuccess,updateSuccess:e.updateSuccess}})],1)},n=[],o={render:r,staticRenderFns:n};t.a=o},vuzE:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-form-item__content",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"el-date-editor el-input el-input--prefix el-input--suffix el-date-editor--date"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dayText,expression:"dayText"}],ref:"daysInput",staticClass:"el-input__inner",attrs:{autocomplete:"off",placeholder:"选择日期时间",size:"",name:"",id:"",type:"text",rows:"2",prefixicon:"el-icon-date"},domProps:{value:e.dayText},on:{focus:function(t){return e.focus()},blur:function(t){return e.blur()},change:function(t){return e.changeDay()},input:function(t){t.target.composing||(e.dayText=t.target.value)}}}),e._v(" "),e._m(0),e._v(" "),e._m(1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.daysPick,expression:"daysPick"}],staticClass:"el-picker-panel el-date-picker el-popper days-picker",staticStyle:{"transform-origin":"center top 0px","z-index":"2026",position:"absolute",left:"-60px"},attrs:{"x-placement":"bottom-start"}},[a("div",{staticClass:"el-picker-panel__body-wrapper"},[a("div",{staticClass:"el-picker-panel__body"},[a("div",{staticClass:"el-picker-panel__content"},[a("table",{staticClass:"el-date-table",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tbody",e._l(e.days,function(t){return a("tr",{staticClass:"el-date-table__row"},e._l(t,function(t){return a("td",{key:t,staticClass:"available"},[a("div",{on:{mousedown:function(a){return e.chooseDay(t)}}},[a("span",{staticClass:"item"},[e._v("\n                      "+e._s(t)+"\n                    ")])])])}),0)}),0)])])])])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix"},[a("i",{staticClass:"el-input__icon el-icon-date"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__suffix"},[a("span",{staticClass:"el-input__suffix-inner"},[a("i",{staticClass:"el-input__icon"})])])}],o={render:r,staticRenderFns:n};t.a=o},wFpB:function(e,t,a){var r=a("NHr3");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("0707acd8",r,!0,{})},wcti:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".set-approve{padding:30px}.set-approve .el-transfer{display:inline-block;-webkit-transform:translateX(50%);transform:translateX(50%)}.set-approve .dialog-footer{margin:0 auto;text-align:center;margin-top:40px}",""])},x31u:function(e,t,a){"use strict";function r(e){a("gADI")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("pcpY"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var s=a("vuzE"),l=a("VU/8"),c=r,d=l(o.a,s.a,!1,c,null,null);t.default=d.exports},xrI4:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".add-project .content{width:964px;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.12),0 0 6px 0 rgba(0,0,0,.04);box-shadow:0 2px 4px 0 rgba(0,0,0,.12),0 0 6px 0 rgba(0,0,0,.04)}",""])},yFbX:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),o=r(n),i=a("Dd8w"),s=r(i),l=a("LJtj"),c=a("vZz+"),d=a("T452"),u=a("zL8q"),h=a("NYxO");t.default={props:{},data:function(){return{projectObj:{},options:[],param:{KeyWord:"",ParentOrgCode:[]},tableData:[],currentRow:null,radio:null}},created:function(){this._getSchemeDetail(),this._getOrgList(),this._getPositionList()},computed:(0,s.default)({},(0,h.mapGetters)(["schemeCode"])),methods:(0,s.default)({_getSchemeDetail:function(){var e=this;(0,l.getSchemeDetail)(this.$route.query.code||this.schemeCode).then(function(t){t.data.State===d.REQ_OK?e.projectObj=t.data.Data:u.Message.error("薪资审批人获取失败，请重试！")}).catch(function(){u.Message.error("薪资审批人获取失败，请重试！")})},_getOrgList:function(){var e=this;(0,c.getOrgList)().then(function(t){if(t.data.State===d.REQ_OK){var a=t.data.Data;e.options=e.recursionFn(a)}})},_getPositionList:function(){var e=this,t=(0,o.default)({},this.param);t.ParentOrgCode.length>0&&(t.ParentOrgCode=t.ParentOrgCode[t.ParentOrgCode.length-1].replace(/"/g,"")),(0,c.getPositionList)(t).then(function(t){t.data.State===d.REQ_OK&&(e.tableData=t.data.Data)}).catch(function(){})},recursionFn:function(e){var t=this,a=[];return e.forEach(function(e){var r=void 0;r=e.Child&&e.Child.length>0?{value:e.OrgCode,label:e.OrgName,children:t.recursionFn(e.Child)}:{value:e.OrgCode,label:e.OrgName},a.push(r)}),a},handleFilter:function(){this._getPositionList()},handleCurrentChange:function(e){this.currentRow=e},pre:function(){this.$emit("pre")},next:function(){var e=this;(0,l.updateCheckPosition)(this.schemeCode,this.radio).then(function(t){t.data.State===d.REQ_OK?(u.Message.success("保存成功！"),e.setSchemeCode(""),e.$emit("next")):u.Message.error("保存失败，请重试！")}).catch(function(){u.Message.error("保存失败，请重试！")})},cancel:function(){this.$emit("cancel")}},(0,h.mapMutations)({setSchemeCode:"SET_SCHEME_CODE"})),watch:{projectObj:{handler:function(e,t){this.radio=e.CheckPosition},deep:!0}}}}});