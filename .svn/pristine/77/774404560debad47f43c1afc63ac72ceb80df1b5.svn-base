webpackJsonp([44],{"/e2/":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"@media screen and (min-width:1920px){.btn-tab[data-v-bc83d68e]{display:inline-block}.right-btn-item[data-v-bc83d68e]{float:right}}.salary-special .left-btn[data-v-bc83d68e]{margin-left:0!important}",""])},"0A7Q":function(t,e,a){var i=a("g8V3");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("15b60b76",i,!0,{})},"Ae/6":function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),n=i(l),s=a("Dd8w"),r=i(s),o=a("auNG"),c=a("T452"),u=a("zL8q"),d=a("NYxO");e.default={props:{type:{type:String,default:""},isModify:{type:Boolean,default:!0},width:{type:Number,default:260},isAdmin:{type:Boolean,default:!0}},data:function(){return{typeList:[],list:[],total:null,listQuery:{page:1,limit:5,title:"",sort:""},ruleForm:{},fileContent:[],titleText:"公告详情",dialogVisible:!1,isModifyDialog:!1,noticeCode:"",promptText:"",status:0,feedbackContent:{content:""},feedbackPublish:{isPublish:!1},isPublish:[{name:"是",value:!0},{name:"否",value:!1}],rules:{content:[{required:!0,message:"请输入反馈内容",trigger:"blur"},{min:1,max:256,message:"长度在 1 到 256 个字符",trigger:"blur"}]}}},created:function(){this._getNoticeList()},computed:(0,r.default)({},(0,d.mapGetters)(["userType","userCode","name","loading"]),{isCompanyAdmin:function(){return this.userType===c.COMPANY_ADMIN}}),methods:{_getNoticeList:function(t){var e=this;t&&(this.listQuery=(0,n.default)({},t)),(0,o.getNoticeList)(this.type,this.listQuery.limit,this.listQuery.page,this.listQuery.title,this.listQuery.sort,this.isAdmin).then(function(t){t.data.State===c.REQ_OK?(e.typeList=t.data.Data.NoticeTypes,e.list=t.data.Data.Notices,e.total=t.data.Total):u.Message.error("加载失败！"),e.falseLoading()}).catch(function(){e.falseLoading(),u.Message.error("加载失败！")})},updateIsTop:function(t){var e=this;(0,o.updateIsTop)(t.Code,!t.IsTop).then(function(t){t.data.State===c.REQ_OK?(u.Message.success("操作成功！"),e._getNoticeList()):u.Message.error("操作失败！")}).catch(function(){u.Message.error("操作失败！")})},handleFilter:function(){this.listQuery.page=1,this._getNoticeList()},handleSizeChange:function(t){this.listQuery.limit=t,this._getNoticeList()},handleCurrentChange:function(t){this.listQuery.page=t,this._getNoticeList()},showNoticeDetail:function(t){this.isAdmin?this.$router.push({path:"/notice/noticeManage/noticeDetailEnd",query:{code:t.Code}}):this.$router.push({path:"/notice/base-info/noticeDetailFront",query:{code:t.Code}})},modifyNotice:function(t){this.$router.push({path:"/notice/noticeManage/modifyNotice",query:{code:t.Code}})},showFeedBack:function(t){this.$router.push({path:"/notice/noticeManage/feedback",query:{code:t.Code}})},showHistory:function(t){this.$router.push({path:"/notice/noticeManage/historyNotice",query:{code:t.Code}})},sendOrRetract:function(t,e,a){2===a?(this.dialogVisible=!0,this.noticeCode=e,this.status=0,this.ruleForm=(0,n.default)({},t),this.promptText="撤回后，员工将无法再看到该公告。是否确定执行该操作？"):(this.dialogVisible=!0,this.noticeCode=e,this.status=1,this.ruleForm=(0,n.default)({},t),this.ruleForm.Start=new Date(this.replaceTime(this.ruleForm.Start)),this.ruleForm.Finish=new Date(this.replaceTime(this.ruleForm.Finish)),this.ruleForm.PublishTime=null,this.promptText="确认发布此公告吗？")},sureRetract:function(){var t=this;this.dialogVisible=!1,this.trueLoading(),0===this.status?(0,o.retractNotice)(this.noticeCode,this.name,this.userCode).then(function(e){e.data.State===c.REQ_OK?(u.Message.success("撤回公告成功！"),t._getNoticeList()):u.Message.error("撤回公告失败，请重试！")}).catch(function(){u.Message.error("撤回公告失败，请重试！")}):1===this.status&&(0,o.publishNotice)(this.ruleForm,this.name,this.userCode).then(function(e){e.data.State===c.REQ_OK?(t._getNoticeList(),u.Message.success("恭喜你，公告发布成功！")):u.Message.error("很遗憾，公告发布失败，请重试!")}).catch(function(){u.Message.error("很遗憾，公告发布失败，请重试!")}),this.falseLoading()},addFeedback:function(){var t=this;this.$refs.feedbackContent.validate(function(e){e&&(0,o.feedback)(t.ruleForm.Code,t.feedbackContent.content,t.feedbackPublish.isPublish).then(function(e){e.data.State===c.REQ_OK?(t.isModifyDialog=!1,t.feedbackContent.content="",t.$refs.feedbackContent.resetFields(),u.Message.success("反馈成功！")):(t.isModifyDialog=!1,u.Message.error("反馈失败！"))}).catch(function(){t.isModifyDialog=!1,u.Message.error("反馈失败！")})})},replaceTime:function(t){if(t){var e=t.replace("/Date(","");return e=e.replace(")/",""),parseInt(e)}},trueLoading:function(){this.$store.dispatch("setLoadingState",!0)},falseLoading:function(){this.$store.dispatch("setLoadingState",!1)}},components:{}}},"CF/5":function(t,e,a){"use strict";function i(t){a("0A7Q")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("Ae/6"),n=a.n(l);for(var s in l)"default"!==s&&function(t){a.d(e,t,function(){return l[t]})}(s);var r=a("ZVrX"),o=a("VU/8"),c=i,u=o(n.a,r.a,!1,c,null,null);e.default=u.exports},GOuC:function(t,e,a){"use strict";function i(t){a("GzKt")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("wUv7"),n=a.n(l);for(var s in l)"default"!==s&&function(t){a.d(e,t,function(){return l[t]})}(s);var r=a("wJf3"),o=a("VU/8"),c=i,u=o(n.a,r.a,!1,c,"data-v-bc83d68e",null);e.default=u.exports},GzKt:function(t,e,a){var i=a("/e2/");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("5982fd2e",i,!0,{})},ZVrX:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"TypeName",label:"员工号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"Title",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type",on:{click:function(a){return t.showNoticeDetail(e.row)}}},[t._v(t._s(e.row.Title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100",align:"center",prop:"NoticeRange",label:"人员状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("stateFilter")(e.row.Status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",sortable:"",prop:"Start",label:"入职时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("replaceTime")(e.row.Start)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"Finish",label:"离职时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("replaceTime")(e.row.Finish)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"Finish",label:"转正日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("replaceTime")(e.row.Finish)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"Publisher",width:"110",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("stateFilter")(e.row.Status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"劳务","class-name":"th-1"}},[a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",width:"150",label:"劳务天数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"劳务费"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"劳务免税额"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"劳务税"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"实发"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"优惠奖金","class-name":"th-2"}},[a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",width:"150",label:"全年一次奖金"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"优惠奖金免税额"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"优惠奖金税"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"实发"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"离职补偿金","class-name":"th-3"}},[a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"离职补偿金"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"离职补偿金免税额"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"实际工作年限数"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"离职补偿税"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"实发"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"期权","class-name":"th-0"}},[a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",width:"150",label:"期权"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"期权免税额"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"PublishDepartment",label:"规定月数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"期权税"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",label:"实发"}})],1)],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[5,10,20,30],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.listQuery,"page",e)},"update:current-page":function(e){return t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v(t._s(t.promptText))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sureRetract()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"公告反馈",visible:t.isModifyDialog},on:{"update:visible":function(e){t.isModifyDialog=e}}},[a("el-form",{ref:"feedbackContent",staticClass:"small-space",attrs:{"label-position":"left","label-width":"100px",model:t.feedbackContent,rules:t.rules}},[a("el-form-item",{attrs:{label:"反馈内容：",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入反馈内容"},model:{value:t.feedbackContent.content,callback:function(e){t.$set(t.feedbackContent,"content",e)},expression:"feedbackContent.content"}})],1),t._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"是否公开："}},[a("el-radio-group",{model:{value:t.feedbackPublish.isPublish,callback:function(e){t.$set(t.feedbackPublish,"isPublish",e)},expression:"feedbackPublish.isPublish"}},t._l(t.isPublish,function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isModifyDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addFeedback}},[t._v("确 定")])],1)],1)],1)},l=[],n={render:i,staticRenderFns:l};e.a=n},g8V3:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".pagination-container{margin-top:20px}",""])},wJf3:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"salary-special mg-30"},[a("div",{staticClass:"noticeType"},[a("div",{staticClass:"btn-tab"},[a("el-button",{staticStyle:{"margin-bottom":"10px"},on:{click:function(e){return t.setCheckedNode()}}},[t._v("\n        选择组织\n      ")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}),1),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}),1),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}),1),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})}),1),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"差异大于"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"差异小于"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"员工号/姓名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"btn-tab right-btn-item",staticStyle:{"margin-bottom":"10px"}},[a("el-button",{staticClass:"left-btn",attrs:{type:"primary"},on:{click:function(e){return t.addNotice()}}},[t._v("\n        月报表\n      ")]),t._v(" "),a("el-button",{staticClass:"left-btn",on:{click:function(e){return t.addNotice()}}},[t._v("\n        人员\n      ")]),t._v(" "),a("el-button",{staticClass:"left-btn",on:{click:function(e){return t.addNotice()}}},[t._v("\n        全部计算\n      ")]),t._v(" "),a("el-button",{staticClass:"left-btn",on:{click:function(e){return t.addNotice()}}},[t._v("\n        逐条计算\n      ")]),t._v(" "),a("el-dropdown",{staticClass:"left-btn"},[a("el-button",[t._v("\n          更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("导入")]),t._v(" "),a("el-dropdown-item",[t._v("导出")]),t._v(" "),a("el-dropdown-item",[t._v("对比")]),t._v(" "),a("el-dropdown-item",[t._v("取消对比")])],1)],1)],1),t._v(" "),a("el-tabs",{attrs:{addable:"",type:"border-card"},on:{"tab-add":t.addTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.typeList,function(e,i){return a("el-tab-pane",{key:e.Code,attrs:{label:e.TypeName,name:e.Code}},[t.activeName==e.Code?a("tab-pane",{ref:"refreshList",refInFor:!0,staticClass:"list",attrs:{type:e.Code,isModify:!0}}):t._e()],1)}),1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap.create,visible:t.dialogTypeVisible},on:{"update:visible":function(e){t.dialogTypeVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"small-space",attrs:{"label-position":"left","label-width":"70px",model:t.ruleForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"名称：",prop:"name",placeholder:"请输入公告类型名称"}},[a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTypeVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.createNoticeType}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]})],1)},l=[],n={render:i,staticRenderFns:l};e.a=n},wUv7:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a("Dd8w"),n=i(l),s=a("auNG"),r=a("T452"),o=a("CF/5"),c=i(o),u=a("zL8q"),d=a("NYxO");e.default={data:function(){return{typeList:[],editableTabsValue:"1",activeName:"",textMap:{createNotice:"新建公告",editNotice:"编辑公告",createType:"新建公告类型"},createTypeName:null,dialogTypeVisible:!1,ruleForm:{name:""},rules:{name:[{required:!0,message:"请输入公告类型名称",trigger:"blur"},{min:1,max:16,message:"长度在 1 到 16 个字符",trigger:"blur"}]},listQuery:{page:1,limit:10,title:"",sort:0},sortOptions:[{label:"全部公告",key:0},{label:"已发布公告",key:2},{label:"未发布公告",key:1}]}},created:function(){this._getNoticeType(),this.$store.dispatch("setLoadingState",!0)},computed:(0,n.default)({},(0,d.mapGetters)(["loading"]),{changeLoading:function(){return this.$store.dispatch("setLoadingState",!0)}}),methods:{_getNoticeType:function(){var t=this;(0,s.getNoticeType)().then(function(e){e.data.State===r.REQ_OK&&(t.typeList=e.data.Data,t.activeName=e.data.Data[0].Code)}).catch(function(){t.falseLoading(),u.Message.error("请求超时，请重试！")})},addTab:function(){this.dialogTypeVisible=!0},removeTab:function(t){var e=this.typeList,a=this.editableTabsValue;a===t&&e.forEach(function(i,l){if(i.name===t){var n=e[l+1]||e[l-1];n&&(a=n.name)}}),this.editableTabsValue=a,this.typeList=e.filter(function(e){return e.name!==t})},createNoticeType:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;(0,s.addNoticeType)(t.ruleForm.name).then(function(e){e.data.State===r.REQ_OK?(t._getNoticeType(),t.dialogTypeVisible=!1,u.Message.success("新增公告类型成功！")):u.Message.error("新增公告类型失败，请重试！")}).catch(function(){u.Message.error("新增公告类型失败，请重试！")})})},addNotice:function(){this.$router.push({path:"/notice/noticeManage/createNotice"})},handleFilter:function(){this.$refs.refreshList[0]._getNoticeList(this.listQuery)},trueLoading:function(){this.$store.dispatch("setLoadingState",!0)},falseLoading:function(){this.$store.dispatch("setLoadingState",!1)}},components:{TabPane:c.default}}}});