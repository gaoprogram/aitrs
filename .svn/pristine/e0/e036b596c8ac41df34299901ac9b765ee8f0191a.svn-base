webpackJsonp([45],{"/Y9K":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".pagination-container{margin-top:20px}",""])},FvPy:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notice-manage mg-30"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"noticeType"},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),t.loading?t._e():i("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.typeList,function(e,a){return i("el-tab-pane",{key:e.Code,attrs:{label:e.TypeName,name:e.Code}},[t.activeName==e.Code?i("tab-pane",{ref:"refreshList",refInFor:!0,staticClass:"list",attrs:{type:e.Code,isModify:!1,isAdmin:!1,width:120}}):t._e()],1)}),1)],1),t._v(" "),i("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}]})],1)},n=[],s={render:a,staticRenderFns:n};e.a=s},PiK8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("auNG"),n=i("T452"),s=i("zL8q"),o=i("bYVI"),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={data:function(){return{typeList:[],loading:!0,activeName:"",listQuery:{page:1,limit:10,title:"",sort:0}}},created:function(){this._getNoticeType()},methods:{_getNoticeType:function(){var t=this;(0,a.getNoticeType)().then(function(e){e.data.State===n.REQ_OK?(t.loading=!1,t.typeList=e.data.Data,t.activeName=e.data.Data[0].Code):(t.loading=!1,s.Message.error("请求错误，请重试！"))}).catch(function(){t.loading=!1,s.Message.error("请求超时，请重试！")})},handleFilter:function(){this.$refs.refreshList[0]._getNoticeList(this.listQuery)}},components:{TabPane:r.default}}},"Yq+X":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"table-content"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{align:"center",prop:"TypeName",label:"公告类型",fixed:"",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"Title",label:"公告标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){return t.showNoticeDetail(e.row)}}},[t._v(t._s(e.row.Title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"NoticeRange",label:"公告范围"}}),t._v(" "),i("el-table-column",{attrs:{width:"90",align:"center",prop:"EnableFeedback",label:"允许反馈"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.EnableFeedback?"是":"否"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"Start",label:"生效日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("replaceTime")(e.row.Start)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"Finish",label:"失效日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("replaceTime")(e.row.Finish)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"100",align:"center",prop:"Status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("stateFilter")(e.row.Status)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"Publisher",width:"110",label:"发布人"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"PublishDepartment",width:"150",label:"发布部门"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",sortable:"",prop:"PublishTime",label:"发布时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("replaceTime")(e.row.PublishTime)))])]}}])}),t._v(" "),t.isAdmin?i("el-table-column",{attrs:{align:"center",label:"操作",width:t.width,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},domProps:{innerHTML:t._s(e.row.IsTop?"取消置顶":"置顶")},on:{click:function(i){return t.updateIsTop(e.row)}}}),t._v(" "),t.isModify?i("el-button",{attrs:{type:"text",size:"small",disabled:2===e.row.Status},on:{click:function(i){return t.modifyNotice(e.row)}}},[t._v("编辑\n        ")]):t._e(),t._v(" "),t.isModify?i("el-button",{attrs:{type:"text",size:"small"},domProps:{innerHTML:t._s(2!==e.row.Status?"发布":"撤回")},on:{click:function(i){return t.sendOrRetract(e.row,e.row.Code,e.row.Status)}}}):t._e(),t._v(" "),i("el-button",{attrs:{type:"text",size:"small",disabled:!t.isCompanyAdmin},on:{click:function(i){return t.showFeedBack(e.row)}}},[t._v("反馈")]),t._v(" "),t.isModify?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.showHistory(e.row)}}},[t._v("历史")]):t._e()]}}],null,!1,4289237562)}):t._e()],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.listQuery,"page",e)},"update:current-page":function(e){return t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("span",[t._v(t._s(t.promptText))]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sureRetract()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"公告反馈",visible:t.isModifyDialog},on:{"update:visible":function(e){t.isModifyDialog=e}}},[i("el-form",{ref:"feedbackContent",staticClass:"small-space",attrs:{"label-position":"left","label-width":"100px",model:t.feedbackContent,rules:t.rules}},[i("el-form-item",{attrs:{label:"反馈内容：",prop:"content"}},[i("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入反馈内容"},model:{value:t.feedbackContent.content,callback:function(e){t.$set(t.feedbackContent,"content",e)},expression:"feedbackContent.content"}})],1),t._v(" "),i("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"是否公开："}},[i("el-radio-group",{model:{value:t.feedbackPublish.isPublish,callback:function(e){t.$set(t.feedbackPublish,"isPublish",e)},expression:"feedbackPublish.isPublish"}},t._l(t.isPublish,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isModifyDialog=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addFeedback}},[t._v("确 定")])],1)],1)],1)},n=[],s={render:a,staticRenderFns:n};e.a=s},b8Up:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=a(n),o=i("Dd8w"),r=a(o),l=i("auNG"),c=i("T452"),u=i("zL8q"),d=i("NYxO");e.default={props:{type:{type:String,default:""},isModify:{type:Boolean,default:!0},width:{type:Number,default:260},isAdmin:{type:Boolean,default:!0}},data:function(){return{typeList:[],list:[],total:null,listQuery:{page:1,limit:10,title:"",sort:""},ruleForm:{},fileContent:[],titleText:"公告详情",dialogVisible:!1,isModifyDialog:!1,noticeCode:"",promptText:"",status:0,feedbackContent:{content:""},feedbackPublish:{isPublish:!1},isPublish:[{name:"是",value:!0},{name:"否",value:!1}],rules:{content:[{required:!0,message:"请输入反馈内容",trigger:"blur"},{min:1,max:256,message:"长度在 1 到 256 个字符",trigger:"blur"}]}}},created:function(){this._getNoticeList()},computed:(0,r.default)({},(0,d.mapGetters)(["userType","userCode","name","loading"]),{isCompanyAdmin:function(){return this.userType===c.COMPANY_ADMIN}}),methods:{_getNoticeList:function(t){var e=this;t&&(this.listQuery=(0,s.default)({},t)),(0,l.getNoticeList)(this.type,this.listQuery.limit,this.listQuery.page,this.listQuery.title,this.listQuery.sort,this.isAdmin).then(function(t){t.data.State===c.REQ_OK?(e.typeList=t.data.Data.NoticeTypes,e.list=t.data.Data.Notices,e.total=t.data.Total):u.Message.error("加载失败！"),e.falseLoading()}).catch(function(){e.falseLoading(),u.Message.error("加载失败！")})},updateIsTop:function(t){var e=this;(0,l.updateIsTop)(t.Code,!t.IsTop).then(function(t){t.data.State===c.REQ_OK?(u.Message.success("操作成功！"),e._getNoticeList()):u.Message.error("操作失败！")}).catch(function(){u.Message.error("操作失败！")})},handleFilter:function(){this.listQuery.page=1,this._getNoticeList()},handleSizeChange:function(t){this.listQuery.limit=t,this._getNoticeList()},handleCurrentChange:function(t){this.listQuery.page=t,this._getNoticeList()},showNoticeDetail:function(t){this.isAdmin?this.$router.push({path:"/notice/noticeManage/noticeDetailEnd",query:{code:t.Code}}):this.$router.push({path:"/notice/base-info/noticeDetailFront",query:{code:t.Code}})},modifyNotice:function(t){this.$router.push({path:"/notice/noticeManage/modifyNotice",query:{code:t.Code}})},showFeedBack:function(t){this.$router.push({path:"/notice/noticeManage/feedback",query:{code:t.Code}})},showHistory:function(t){this.$router.push({path:"/notice/noticeManage/historyNotice",query:{code:t.Code}})},sendOrRetract:function(t,e,i){2===i?(this.dialogVisible=!0,this.noticeCode=e,this.status=0,this.ruleForm=(0,s.default)({},t),this.promptText="撤回后，员工将无法再看到该公告。是否确定执行该操作？"):(this.dialogVisible=!0,this.noticeCode=e,this.status=1,this.ruleForm=(0,s.default)({},t),this.ruleForm.Start=new Date(this.replaceTime(this.ruleForm.Start)),this.ruleForm.Finish=new Date(this.replaceTime(this.ruleForm.Finish)),this.ruleForm.PublishTime=null,this.promptText="确认发布此公告吗？")},sureRetract:function(){var t=this;this.dialogVisible=!1,this.trueLoading(),0===this.status?(0,l.retractNotice)(this.noticeCode,this.name,this.userCode).then(function(e){e.data.State===c.REQ_OK?(u.Message.success("撤回公告成功！"),t._getNoticeList()):u.Message.error("撤回公告失败，请重试！")}).catch(function(){u.Message.error("撤回公告失败，请重试！")}):1===this.status&&(0,l.publishNotice)(this.ruleForm,this.name,this.userCode).then(function(e){e.data.State===c.REQ_OK?(t._getNoticeList(),u.Message.success("恭喜你，公告发布成功！")):u.Message.error("很遗憾，公告发布失败，请重试!")}).catch(function(){u.Message.error("很遗憾，公告发布失败，请重试!")}),this.falseLoading()},addFeedback:function(){var t=this;this.$refs.feedbackContent.validate(function(e){e&&(0,l.feedback)(t.ruleForm.Code,t.feedbackContent.content,t.feedbackPublish.isPublish).then(function(e){e.data.State===c.REQ_OK?(t.isModifyDialog=!1,t.feedbackContent.content="",t.$refs.feedbackContent.resetFields(),u.Message.success("反馈成功！")):(t.isModifyDialog=!1,u.Message.error("反馈失败！"))}).catch(function(){t.isModifyDialog=!1,u.Message.error("反馈失败！")})})},replaceTime:function(t){if(t){var e=t.replace("/Date(","");return e=e.replace(")/",""),parseInt(e)}},trueLoading:function(){this.$store.dispatch("setLoadingState",!0)},falseLoading:function(){this.$store.dispatch("setLoadingState",!1)}},components:{}}},bYVI:function(t,e,i){"use strict";function a(t){i("qRkQ")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("b8Up"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var r=i("Yq+X"),l=i("VU/8"),c=a,u=l(s.a,r.a,!1,c,null,null);e.default=u.exports},jQ1j:function(t,e,i){"use strict";function a(t){i("vnUR")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("PiK8"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var r=i("FvPy"),l=i("VU/8"),c=a,u=l(s.a,r.a,!1,c,null,null);e.default=u.exports},oANd:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"",""])},qRkQ:function(t,e,i){var a=i("/Y9K");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("7d050738",a,!0,{})},vnUR:function(t,e,i){var a=i("oANd");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("4376e2b4",a,!0,{})}});